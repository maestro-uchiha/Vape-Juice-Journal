server {
  listen 80;
  server_name _;
  root /usr/share/nginx/html;
  index index.html;

  # No directory listings
  autoindex off;

  # Custom 404
  error_page 404 /404.html;
  location = /404.html { internal; }

  # Let’s Encrypt path (for when you add a custom domain)
  location ^~ /.well-known/acme-challenge/ { try_files $uri =404; }

  # Static-only (no SPA fallback)
  location / {
    try_files $uri $uri/ =404;
  }

  # Cache policy
  location ~* \.(css|js|png|jpe?g|gif|svg|ico|webp|woff2?)$ {
    add_header Cache-Control "public, max-age=31536000, immutable" always;
    try_files $uri =404;
  }
  location ~* \.html?$ {
    add_header Cache-Control "no-cache" always;
  }

  # Handy headers
  add_header X-Content-Type-Options "nosniff" always;
  add_header Referrer-Policy "strict-origin-when-cross-origin" always;
}
